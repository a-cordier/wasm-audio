<!DOCTYPE html>

<!--suppress HtmlUnknownTarget -->
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title></title>
    <meta name="description" content="" />
    <meta name="author" content="36ve" />
    <link
      href="https://fonts.googleapis.com/css2?family=Monoton&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="index.js"></script>
  </head>

  <body>
    <div class="content">
      <root-element></root-element>
    </div>
    <script>
      (function () {
        var hosting = "a-cordier.github.io";
        var wasmTestedVersion = 84;
        var isDeployed = window.location.host === hosting;
        var isHttps = window.location.protocol === "https:";

        if (!isDeployed) {
          return;
        }

        if (forceHttps()) {
          return;
        }

        function forceHttps() {
          if (isDeployed && !isHttps) {
            window.location.protocol = "https";
            return true;
          }
          return false;
        }

        function isChrome() {
          var runtimeWindow = window;
          return !!runtimeWindow.chrome && (!!runtimeWindow.chrome.webstore || !!runtimeWindow.chrome.runtime);
        }

        function isUpToDate() {
          var version = navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/);
          if (version == null || version.length != 5) {
            return false;
          }
          version = version.map((v) => parseInt(v, 10));
          var majorVersion = version[1];
          return majorVersion >= wasmTestedVersion;
        }

        if (!isChrome()) {
          alert(
            [
              "WARNING!",
              "This application uses Web API that have not been properly standardized yet.",
              "For now it has been succesfully tested in Chromium browsers only.",
              "You are adviced to switch to a Chromium browser before going further.",
            ].join("\n")
          );
        } else if (!isUpToDate()) {
          alert(
            [
              "WARNING!",
              "This application uses recent Web API and should be run in an up to date Chromium browser.",
              "For now it has been succesfully tested in major version " + wasmTestedVersion + " only.",
              "You are adviced to update your browser before going further.",
            ].join("\n")
          );
        }
      })();
    </script>
  </body>

  <style>
    :root {
      /* TODO: replace with gray scale */
      --light-color: #68718a;
      --lighter-color: #e8eaec;
      --darker-color: #110517;

      /* this color is used to emphasis the control when midi learn is toggled => todo rename ? */
      --control-hander-color-focused: var(--lighter-color);
      --control-handle-color: #c5d7e4;
      --control-cursor-color: #110517;
      --control-top-color: #1f262e;
      --control-label-color: var(--control-handle-color);

      --button-disposed-background-color: #e8eaec;
      --button-disposed-label-color: #1f262e;
      --button-active-background-color: #090816;
      --button-active-label-color: #b4d455;
      --button-border: 1px solid var(--light-color);

      --key-sharp-color: var(--control-top-color);
      --key-whole-color: var(--lighter-color);
      --keyboard-panel-color: var(--control-top-color);

      --lcd-led-on-color: #b4d455;
      --lcd-screen-border-color: #2c2c31;
      --lcd-screen-background: #090816;

      --oscillator-panel-color: #145a6a;
      --oscillator-mix-panel-color: var(--oscillator-panel-color);
      --envelope-panel-color: var(--oscillator-panel-color);
      --filter-panel-color: #ac8f1d;
      --filter-mod-panel-color: var(--filter-panel-color);
      --lfo-panel-color: #9a1a40;
      --main-panel-color: #272324;

      /* todo not used at the moment => keep or throw away */
      --box-shadow-color: red;
      --box-shadow: 0px 0px 0px 0px var(--box-shadow-color);

      --ui-transition-time: 0.4s;
    }

    html {
      font-family: "Space Mono", monospace;
    }

    body {
      background-color: var(--darker-color, black);
    }

    .content {
      width: 100%;
    }
  </style>
</html>
